import{_ as D,y as V,w as j,c as g,o as v,a as l,p as L,z as O,B as z,j as E,F as S,g as C,h as Y,k as i}from"./router-JVv0ElFj.js";import{_ as B}from"./dynamic-import-helper-BheWnx7M.js";import{r as X}from"./vue-resize-directive-CDf_Yp3t.js";import{V as w,X as N,w as f,c as y,a as x,T as G,ae as W,E as q,af as F,ak as H,al as Q}from"./three.module-x1Cfo4R0.js";import{a as U}from"./delay-DTFr9Qec.js";import{M}from"./cube-algebra-Cwll5vw1.js";import{Q as J}from"./quit-cleaner-U9OkpSad.js";import{A as K}from"./accelerometer-C2noNsYo.js";const h=Math.PI/6,m=Math.PI-Math.atan(2*Math.sqrt(2)),Z=Math.sqrt(2+Math.sqrt(3)*2/9),T=2*Math.asin(Z/2),P=Math.PI*2-m-T,A=(e,t,s)=>new w(e*Math.sin(t)*Math.cos(s),e*Math.cos(t),e*Math.sin(t)*Math.sin(s)),n=(e,t,s,a=1)=>({index:e,label:t,position:A(a,...s)}),u=[n(0,"1",[0,0]),n(7,"i2",[m,0]),n(8,"j2",[m,h*4]),n(9,"k2",[m,h*-4]),n(1,"i",[m/2,h]),n(2,"j",[m/2,h*5]),n(3,"k",[m/2,h*-3]),n(4,"i-",[m/2,-h]),n(5,"j-",[m/2,h*3]),n(6,"k-",[m/2,h*-5]),n(22,"2i",[P,h*6]),n(23,"2i-",[T,h*6]),n(12,"2j",[P,h*-2]),n(15,"2j-",[T,h*-2]),n(21,"2k",[P,h*2]),n(18,"2k-",[T,h*2])],$=e=>e.reduce((t,s)=>t.add(s),new w).multiplyScalar(1/e.length),ee=(e,t,s,a=1)=>({index:e,label:t,position:$(s.map(c=>u[c].position)).multiplyScalar(a)});[[10,"ijk",[4,5,6,10,12,14]],[19,"k-ji",[4,5,9,11,13,14],3],[16,"kj-i",[4,8,6,11,12,15],3],[13,"ij-k-",[4,8,9,10,13,15]],[17,"kji-",[7,5,6,10,13,15],3],[11,"i-jk-",[7,5,9,11,12,15]],[14,"i-j-k",[7,8,6,11,13,14]],[20,"k-j-i-",[7,8,9,10,12,14],3]].forEach(e=>u.push(ee(...e)));const k=4e-4,te={name:"cube-cayley-graph",directives:{resize:X},mixins:[J,K],data(){return{size:{width:800,height:800},fps:0,rotationIndex:0,rotationT:0}},computed:{handlePosition(){if(this.rotationIndex===0)return{x:0,y:0};const e=Math.PI*(this.rotationIndex+3.5)/3,t=100,s=3*this.rotationT**2-2*this.rotationT**3;return{x:Math.cos(e)*t*s,y:Math.sin(e)*t*s}}},mounted(){this.initializeRenderer(),this.createElements(),this.createEdges(),this.render()},beforeDestroy(){this.rendererActive=!1},methods:{onResize(){this.size={width:this.$el.clientWidth,height:this.$el.clientHeight}},initializeRenderer(){this.renderer=new W({antialias:!0,canvas:this.$refs.canvas,alpha:!0}),this.renderer.setClearColor(new x("lightblue"),1),this.renderer.setSize(this.size.width,this.size.height,!1),this.camera=new q(60,this.size.width/this.size.height,10,1e3),this.viewTheta=Math.PI*.3,this.viewPhi=Math.PI*.6,this.viewRadius=300,this.scene=new F,this.rendererActive=!0,this.sphere=new H(8,32,16),this.cone=new Q(1,1,16)},async render(){let e=performance.now(),t=Math.floor(e/1e3),s=0;for(;this.rendererActive;){this.sensorVelocity&&(this.viewTheta+=this.sensorVelocity[1]*k,this.viewPhi+=this.sensorVelocity[0]*k*.1,this.viewTheta=Math.max(Math.min(this.viewTheta,Math.PI-.01),.01)),this.camera.position.copy(A(this.viewRadius,this.viewTheta,this.viewPhi)),this.camera.lookAt(0,0,0),this.renderer.render(this.scene,this.camera),++s;const a=performance.now(),c=Math.floor(a/1e3);c>t&&(this.fps=s/(c-t),s=0,t=c),this.rotationIndex>0&&(this.rotationT+=(a-e)*.002,this.rotationT>=1?this.permute(this.rotationIndex):this.elements.forEach((r,_)=>{const o=M[u[_].index][this.rotationIndex],d=this.elementPositions[u[_].index],b=this.elementPositions[o],p=3*this.rotationT**2-2*this.rotationT**3;r.position.copy(d.clone().lerp(b,p))})),e=a,await U()}},async createElements(){this.elements=[],await Promise.all(u.map(async e=>{const{default:t}=await B(Object.assign({"../assets/cube-algebra/1.png":()=>i(()=>import("./1-bsFYNoKt.js"),[],import.meta.url),"../assets/cube-algebra/2i-.png":()=>i(()=>import("./2i--mgqnPBvq.js"),[],import.meta.url),"../assets/cube-algebra/2i.png":()=>i(()=>import("./2i-DiR_vbjt.js"),[],import.meta.url),"../assets/cube-algebra/2j-.png":()=>i(()=>import("./2j--hULQ2CJM.js"),[],import.meta.url),"../assets/cube-algebra/2j.png":()=>i(()=>import("./2j-COq7G0UF.js"),[],import.meta.url),"../assets/cube-algebra/2k-.png":()=>i(()=>import("./2k--JKAoC7vd.js"),[],import.meta.url),"../assets/cube-algebra/2k.png":()=>i(()=>import("./2k-DHzIHACs.js"),[],import.meta.url),"../assets/cube-algebra/i-.png":()=>i(()=>import("./i--DSqACMV4.js"),[],import.meta.url),"../assets/cube-algebra/i-j-k.png":()=>i(()=>import("./i-j-k-BiNVB50u.js"),[],import.meta.url),"../assets/cube-algebra/i-jk-.png":()=>i(()=>import("./i-jk--WSoO9e2H.js"),[],import.meta.url),"../assets/cube-algebra/i.png":()=>i(()=>import("./i-u11f7zF-.js"),[],import.meta.url),"../assets/cube-algebra/i2.png":()=>i(()=>import("./i2-Bo8zZksG.js"),[],import.meta.url),"../assets/cube-algebra/ij-k-.png":()=>i(()=>import("./ij-k--CuJSAht-.js"),[],import.meta.url),"../assets/cube-algebra/ijk.png":()=>i(()=>import("./ijk-CoXT8Db7.js"),[],import.meta.url),"../assets/cube-algebra/j-.png":()=>i(()=>import("./j--cvbrM_D_.js"),[],import.meta.url),"../assets/cube-algebra/j.png":()=>i(()=>import("./j-DCW8liRt.js"),[],import.meta.url),"../assets/cube-algebra/j2.png":()=>i(()=>import("./j2-CzIt_cP8.js"),[],import.meta.url),"../assets/cube-algebra/k-.png":()=>i(()=>import("./k--BfeO-kJE.js"),[],import.meta.url),"../assets/cube-algebra/k-j-i-.png":()=>i(()=>import("./k-j-i--CYm-xUce.js"),[],import.meta.url),"../assets/cube-algebra/k-ji.png":()=>i(()=>import("./k-ji-D00ReW4J.js"),[],import.meta.url),"../assets/cube-algebra/k.png":()=>i(()=>import("./k-CZJCx2Yk.js"),[],import.meta.url),"../assets/cube-algebra/k2.png":()=>i(()=>import("./k2-BnZw4Mfn.js"),[],import.meta.url),"../assets/cube-algebra/kj-i.png":()=>i(()=>import("./kj-i-MEXKzzpP.js"),[],import.meta.url),"../assets/cube-algebra/kji-.png":()=>i(()=>import("./kji--BJMUU3BU.js"),[],import.meta.url)}),`../assets/cube-algebra/${e.label}.png`,4),s=new f(this.sphere,new y({map:new G().load(t)}));this.elements.push(s),s.position.copy(e.position.clone().multiplyScalar(100)),this.scene.add(s)})),this.elementPositions=this.elements.reduce((e,t,s)=>(e[u[s].index]=t.position.clone(),e),[])},createEdges(){const e=["red","green","blue"],t=new w(0,1,0);u.forEach(s=>{for(let a=1;a<=3;++a){const c=M[s.index][a],r=s.position,o=u.find(R=>R.index===c).position.clone().sub(r),d=t.clone().cross(o).normalize(),b=Math.acos(o.clone().normalize().dot(t)),p=new N;p.position.copy(r.clone().multiplyScalar(100)),p.quaternion.setFromAxisAngle(d,b),p.scale.x=p.scale.z=1,p.scale.y=o.length()*100;const I=new f(this.cone,new y({color:new x(e[a-1])}));I.position.y=.5,p.add(I),this.scene.add(p)}})},onMouseMove(e){e.buttons===1&&(this.viewPhi+=e.movementX*.01,this.viewTheta-=e.movementY*.01,this.viewTheta=Math.max(Math.min(this.viewTheta,Math.PI-.01),.01))},onMouseWheel(e){this.viewRadius*=Math.exp(e.deltaY*.001)},onTouchMove(e){const t=e.touches[0];if(this.lastTouchPoint){const s=t.pageX-this.lastTouchPoint.pageX,a=t.pageY-this.lastTouchPoint.pageY;this.viewPhi+=s*.01,this.viewTheta-=a*.01,this.viewTheta=Math.max(Math.min(this.viewTheta,Math.PI-.01),.01)}this.lastTouchPoint={pageX:t.pageX,pageY:t.pageY}},onTouchEnd(){this.lastTouchPoint=null},rotate(e){this.rotationIndex=e},permute(e){this.elements.forEach((t,s)=>{const a=M[u[s].index][e];t.position.copy(this.elementPositions[a])}),this.elementPositions=this.elements.reduce((t,s,a)=>(t[u[a].index]=s.position.clone(),t),[]),this.rotationIndex=0,this.rotationT=0}},watch:{size(e){this.camera.aspect=e.width/e.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(e.width,e.height,!1)}}},se={class:"cube-cayley-graph"},ie=["width","height"],oe={class:"status"},ae={key:0,class:"fps"},re={class:"control",width:"240",height:"240",viewBox:"-120 -120 240 240"},ne=["x2","y2"],he=["cx","cy","onClick","onTouchstart"],ce={class:"handle"},le=["cx","cy"];function me(e,t,s,a,c,r){const _=V("resize");return j((v(),g("div",se,[l("article",{onMousemove:t[0]||(t[0]=(...o)=>r.onMouseMove&&r.onMouseMove(...o)),onMousewheel:t[1]||(t[1]=E((...o)=>r.onMouseWheel&&r.onMouseWheel(...o),["prevent"])),onTouchmove:t[2]||(t[2]=E((...o)=>r.onTouchMove&&r.onTouchMove(...o),["prevent"])),onTouchend:t[3]||(t[3]=(...o)=>r.onTouchEnd&&r.onTouchEnd(...o))},[l("canvas",{ref:"canvas",width:c.size.width,height:c.size.height},null,8,ie),l("span",oe,[c.fps?(v(),g("span",ae,[t[4]||(t[4]=O("fps ",-1)),l("em",null,z(c.fps),1)])):L("",!0)])],32),l("header",null,[(v(),g("svg",re,[l("g",null,[(v(),g(S,null,C(6,o=>l("g",{class:Y(`unit${o}`),key:o},[l("line",{class:"track",x1:"0",y1:"0",x2:100*Math.cos((o+3.5)*Math.PI/3),y2:100*Math.sin((o+3.5)*Math.PI/3)},null,8,ne),l("circle",{class:"tip",cx:100*Math.cos((o+3.5)*Math.PI/3),cy:100*Math.sin((o+3.5)*Math.PI/3),onClick:d=>r.rotate(o),onTouchstart:E(d=>r.rotate(o),["prevent"])},null,40,he)],2)),64))]),l("g",ce,[l("circle",{cx:r.handlePosition.x,cy:r.handlePosition.y},null,8,le)])]))])])),[[_,r.onResize]])}const Ee=D(te,[["render",me],["__scopeId","data-v-5c6dffb1"]]);export{Ee as default};
