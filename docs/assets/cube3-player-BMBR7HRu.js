import{u}from"./url-DHKDaZKd.js";import{r as d}from"./vue-resize-directive-CDf_Yp3t.js";import{C as f}from"./cube3-BnueevaP.js";import{p as m,s as w}from"./cubeObject-CTeWqh_v.js";import{r as v}from"./roll-quaternion-BKmTCWc9.js";import{_,r as b,y as g,w as y,c as n,o as a,b as z,a as c,p as C,z as $,B as P}from"./router-JVv0ElFj.js";import"./_commonjsHelpers-DM6icglO.js";import"./three.module-x1Cfo4R0.js";import"./delay-DTFr9Qec.js";import"./cube-algebra-Cwll5vw1.js";const k="LrDuBflRdUbF",R={name:"cube3-player",directives:{resize:d},components:{Cube3:f},data(){return{size:void 0,fps:null,code:null}},mounted(){window.$cube=this.$refs.viewer.cube,document.addEventListener("keydown",e=>{switch(e.key){case"Home":this.$refs.viewer&&this.$refs.viewer.cube.reset();break;default:const t=k.indexOf(e.key);t>=0&&this.$refs.viewer&&this.$refs.viewer.cube.twist(t)}}),window.onhashchange=()=>this.onHashChange(),this.onHashChange()},methods:{onResize(){this.size={width:this.$el.clientWidth,height:this.$el.clientHeight}},onFps(e){this.fps=e.fps},onHashChange(){let e=location.hash.substr(1);e[0]==="/"&&!/#/.test(e)&&(e+="#"),e=e.replace(/.*#/,"");const t=u.parse(e,!0),r=t.pathname;if(r&&(this.code=r),t.query.path){const o=m(t.query.path);if(o.length){const s=o[0];s>=0&&this.$refs.viewer.cube.twist(s).then(()=>{const i=w(o.slice(1));location.hash=`${this.getRouterPath()}${this.code}?path=${i}`})}}},getRouterPath(){const[e]=location.hash.match(/^#\/[^#]*/)||[];return e?e+"#":""},async roll(){await v(this.$refs.viewer.cube.graph.quaternion,{onSegment:()=>!0,segmentDuration:1200,segmentInterval:100,pitchSpan:Math.PI,rollSpan:Math.PI*.6})}},watch:{code(e){location.hash=this.getRouterPath()+e}}},S={class:"cube3-player"},x={class:"status"},B={key:0,class:"fps"};function D(e,t,r,o,s,i){const h=b("Cube3"),p=g("resize");return y((a(),n("div",S,[z(h,{ref:"viewer",class:"viewer",size:s.size,code:s.code,"onUpdate:code":t[0]||(t[0]=l=>s.code=l),onFps:i.onFps},null,8,["size","code","onFps"]),c("span",x,[s.fps?(a(),n("span",B,[t[1]||(t[1]=$("fps ",-1)),c("em",null,P(s.fps),1)])):C("",!0)])])),[[p,i.onResize]])}const U=_(R,[["render",D],["__scopeId","data-v-882770d2"]]);export{U as default};
