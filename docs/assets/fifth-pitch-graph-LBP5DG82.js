import{r as y}from"./vue-resize-directive-CDf_Yp3t.js";import{S as b}from"./svg-map-D4aMqU55.js";import{_ as g,r as L,y as S,c as a,o as l,w as i,a as t,e as B,i as C,v as m,F as c,g as _,h as d,p as P,B as u,C as p,z as f}from"./router-JVv0ElFj.js";const v=-Math.log(2)/Math.log(3),z={name:"fifth-pitch-graph",directives:{resize:y},components:{SvgMap:b},data(){return{size:{},points:[].concat(...Array(60).fill().map((o,n)=>Array(60).fill().map((h,r)=>({m:n-30,n:r-30})).map(({m:h,n:r})=>({m:h,n:r,value:2**h*3**r})).map(({m:h,n:r,value:e})=>({m:h,n:r,label:this.pointLabel(h,r),onBand:e>=1&&e<2})))),CONTOUR_SLOPE:v,steps:[{m:0,n:0,name:"C"},{m:-1,n:1,name:"G"},{m:-3,n:2,name:"D"},{m:-4,n:3,name:"A"},{m:-6,n:4,name:"E"},{m:-7,n:5,name:"B"},{m:-9,n:6,name:"♯F"},{m:2,n:-1,name:"F"},{m:4,n:-2,name:"♭B"},{m:5,n:-3,name:"♭E"},{m:7,n:-4,name:"♭A"},{m:8,n:-5,name:"♭D"},{m:10,n:-6,name:"♭G"}],showPointLabels:!1,showBand:!1,showSteps:!1}},mounted(){},methods:{onResize(){this.size={width:this.$el.clientWidth,height:this.$el.clientHeight}},pointLabel(o,n){return Math.abs(o)>19||Math.abs(n)>12?null:Math.max(Math.abs(o),Math.abs(n))>9?(2**o*3**n).toPrecision(4):o>=0&&n>=0?2**o*3**n:o<0&&n<0?`1 / ${2**-o*3**-n}`:o<0?`${3**n} / ${2**-o}`:`${2**o} / ${3**-n}`}}},E={class:"fifth-pitch-graph"},N={class:"band"},U=["d"],M=["y1","y2"],R=["y1","y2"],T={class:"points"},k=["transform"],V=["font-size","transform"],D={class:"steps"},A=["x1","y1","x2","y2"],F=["transform"],G={class:"formations"},W={class:"inner"};function H(o,n,h,r,e,O){const w=L("SvgMap"),x=S("resize");return l(),a("div",E,[i((l(),B(w,{width:e.size.width,height:e.size.height,initViewWidth:20,class:"svg-map"},{default:C(()=>[n[3]||(n[3]=t("g",{class:"axes"},[t("line",{x1:-100,x2:100,y1:0,y2:0}),t("line",{y1:-100,y2:100,x1:0,x2:0})],-1)),i(t("g",N,[t("path",{class:"bg",d:`M-100 ${e.CONTOUR_SLOPE*100} L100 ${e.CONTOUR_SLOPE*-100} L101 ${e.CONTOUR_SLOPE*-100} L-99 ${e.CONTOUR_SLOPE*100} Z`},null,8,U),t("line",{class:"contour-1",x1:-100,y1:e.CONTOUR_SLOPE*100,x2:100,y2:e.CONTOUR_SLOPE*-100},null,8,M),t("line",{class:"contour-2",x1:-99,y1:e.CONTOUR_SLOPE*100,x2:101,y2:e.CONTOUR_SLOPE*-100},null,8,R)],512),[[m,e.showBand]]),t("g",T,[(l(!0),a(c,null,_(e.points,s=>(l(),a("g",{key:`point-${s.m}-${s.n}`,transform:`translate(${s.m}, ${-s.n})`,class:d({emphasize:e.showBand&&s.onBand})},[t("circle",{class:d(["dot",{axis:s.m==0||s.n==0,step:e.showSteps&&s.onBand&&Math.abs(s.n)<=6}])},null,2),s.label?i((l(),a("text",{key:0,class:"label","font-size":e.showBand&&s.onBand?.24:.16,transform:`translate(${s.m==0?.14:0}, -0.1)`},u(s.label),9,V)),[[m,e.showPointLabels]]):P("",!0),t("title",null,"n: "+u(s.n)+", m: "+u(s.m),1)],10,k))),128))]),i(t("g",D,[(l(!0),a(c,null,_(e.steps,s=>(l(),a("line",{key:`step-line-${s.n}`,x1:-100+s.m,y1:e.CONTOUR_SLOPE*100-s.n,x2:100+s.m,y2:e.CONTOUR_SLOPE*-100-s.n},null,8,A))),128)),(l(!0),a(c,null,_(e.steps,s=>(l(),a("text",{key:`step-text-${s.n}`,transform:`translate(${s.m-.2}, ${-s.n+.4})`,"font-size":.4},u(s.name),9,F))),128))],512),[[m,e.showSteps]])],void 0,!0),_:1},8,["width","height"])),[[x,O.onResize]]),t("header",null,[t("p",null,[i(t("input",{type:"checkbox","onUpdate:modelValue":n[0]||(n[0]=s=>e.showPointLabels=s),title:"show point labels"},null,512),[[p,e.showPointLabels]]),i(t("input",{type:"checkbox","onUpdate:modelValue":n[1]||(n[1]=s=>e.showBand=s),title:"show band"},null,512),[[p,e.showBand]]),i(t("input",{type:"checkbox","onUpdate:modelValue":n[2]||(n[2]=s=>e.showSteps=s),title:"show steps"},null,512),[[p,e.showSteps]])]),t("div",G,[t("div",W,[i(t("p",null,[...n[4]||(n[4]=[f(" f(m, n) = 2",-1),t("sup",null,"m",-1),f(" × 3",-1),t("sup",null,"n",-1)])],512),[[m,e.showPointLabels]]),i(t("p",null," Band: 1 ≤ f < 2 ",512),[[m,e.showBand]])])])])])}const q=g(z,[["render",H],["__scopeId","data-v-17a0eb5a"]]);export{q as default};
