(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-358a8410","mesh-viewer"],{"0d42":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("MeshViewer",e._b({},"MeshViewer",e.param,!1))},n=[],a=s("dc0d");const o=Math.PI/2,r=[].concat(...[[0,0],[o,0],[-o,0],[0,o],[0,-o],[2*o,0]].map(([e,t])=>[[e,0,t],[e,o,t],[e,2*o,t],[e,3*o,t]])),h={entities:r.map((e,t)=>({label:`${t+1}`,prototype:"chess-knight",position:[5*(t%4-1.5),3*(2.5-Math.floor(t/4)),0],euler:e})),cameraInit:{radius:18,theta:0,phi:0}},u=Math.sqrt(.5),c=[[{label:"1",quaternion:[0,0,0,1]}],[{label:"i<sup>1/2</sup>",quaternion:[u,0,0,u]},{label:"i<sup>-1/2</sup>",quaternion:[-u,0,0,u]},{label:"j<sup>1/2</sup>",quaternion:[0,u,0,u]},{label:"j<sup>-1/2</sup>",quaternion:[0,-u,0,u]},{label:"k<sup>1/2</sup>",quaternion:[0,0,u,u]},{label:"k<sup>-1/2</sup>",quaternion:[0,0,-u,u]}],[{label:"i",quaternion:[1,0,0,0]},{label:"j",quaternion:[0,1,0,0]},{label:"k",quaternion:[0,0,1,0]}],[{label:"i<sup>1/2</sup>j<sup>1/2</sup>",quaternion:[.5,.5,.5,.5]},{label:"i<sup>1/2</sup>j<sup>-1/2</sup>",quaternion:[.5,-.5,-.5,.5]},{label:"i<sup>-1/2</sup>j<sup>1/2</sup>",quaternion:[-.5,.5,-.5,.5]},{label:"i<sup>-1/2</sup>j<sup>-1/2</sup>",quaternion:[-.5,-.5,.5,.5]},{label:"i<sup>1/2</sup>k<sup>1/2</sup>",quaternion:[.5,-.5,.5,.5]},{label:"i<sup>1/2</sup>k<sup>-1/2</sup>",quaternion:[.5,.5,-.5,.5]},{label:"i<sup>-1/2</sup>k<sup>1/2</sup>",quaternion:[-.5,.5,.5,.5]},{label:"i<sup>-1/2</sup>k<sup>-1/2</sup>",quaternion:[-.5,-.5,-.5,.5]}],[{label:"i<sup>1/2</sup>j",quaternion:[0,u,u,0]},{label:"i<sup>-1/2</sup>j",quaternion:[0,u,-u,0]},{label:"ij<sup>1/2</sup>",quaternion:[u,0,u,0]},{label:"ij<sup>-1/2</sup>",quaternion:[u,0,-u,0]},{label:"ik<sup>1/2</sup>",quaternion:[u,u,0,0]},{label:"ik<sup>-1/2</sup>",quaternion:[u,-u,0,0]}]],l={entities:[].concat(...c.map((e,t)=>e.map(({label:s,quaternion:i},n)=>({label:s,prototype:"chess-knight",position:[4*(n-(e.length-1)/2),4*(2-t),0],quaternion:i})))),cameraInit:{radius:20,theta:0,phi:0}},p={"quarter-array-4x6":h,"quarter-categories":l};var d={name:"mesh-viewer-demo",props:{config:String},components:{MeshViewer:a["default"]},data(){return{param:p[this.config]}}},m=d,w=s("0c7c"),f=Object(w["a"])(m,i,n,!1,null,null,null);t["default"]=f.exports},"3e72":function(e,t,s){var i={"./chess-knight.json":["ad0d","chunk-2d21368d"]};function n(e){if(!s.o(i,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],n=t[0];return s.e(t[1]).then((function(){return s.t(n,3)}))}n.keys=function(){return Object.keys(i)},n.id="3e72",e.exports=n},5027:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));function i(){return new Promise(e=>requestAnimationFrame(e))}},6445:function(e,t,s){"use strict";t["a"]={created(){this.quitCleaner=new Promise(e=>this.quitClear=e)},methods:{async appendCleaner(e){"pending"!==await Promise.race([this.quitCleaner,"pending"])?e():this.quitCleaner=this.quitCleaner.then(e)}},beforeDestroy(){this.quitClear()}}},"8d36":function(e,t,s){},c638:function(e,t,s){"use strict";const i=.01;t["a"]={created(){this.sensorAcceleration=[0,0,0],this.sensorVelocity=[0,0,0],this.sensorDamping=i,"undefined"!==typeof LinearAccelerationSensor&&navigator.permissions.query({name:"accelerometer"}).then(e=>{if("granted"===e.state){const e=new LinearAccelerationSensor({frequency:60}),t=()=>{this.sensorAcceleration=[e.x,e.y,e.z],this.sensorVelocity.forEach((e,t)=>{this.sensorVelocity[t]+=this.sensorAcceleration[t],this.sensorVelocity[t]*=1-this.sensorDamping})};e.addEventListener("reading",t),this.appendCleaner(()=>e.removeEventListener("reading",t)),e.start()}})}}},cd67:function(e,t,s){"use strict";var i=s("8d36"),n=s.n(i);n.a},dc0d:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],staticClass:"mesh-viewer"},[s("article",{on:{mousemove:e.onMouseMove,mousewheel:function(t){return t.preventDefault(),e.onMouseWheel(t)},touchmove:function(t){return t.preventDefault(),e.onTouchMove(t)},touchend:e.onTouchEnd}},[s("canvas",{ref:"canvas",attrs:{width:e.size.width,height:e.size.height}}),s("div",e._l(e.labels,(function(t,i){return s("span",{key:i,staticClass:"label",style:{left:100*t.position.x+"%",top:100*t.position.y+"%"},domProps:{innerHTML:e._s(t.content)}})})),0),s("span",{directives:[{name:"show",rawName:"v-show",value:e.showStatus,expression:"showStatus"}],staticClass:"status"},[e.fps?s("span",{staticClass:"fps"},[e._v("fps "),s("em",[e._v(e._s(e.fps))])]):e._e()])])])},n=[],a=s("428d"),o=s.n(a),r=s("5a89"),h=s("5027"),u=s("819c"),c=s("6445"),l=s("c638");const p=(e,t,s)=>new r["x"](e*Math.sin(t)*Math.cos(s),e*Math.cos(t),e*Math.sin(t)*Math.sin(s));class d{constructor(e,t,{content:s,offset:i=[0,1.3,0]}={}){this.camera=t,this.content=s,this.graphNode=new r["n"],this.graphNode.position.set(...i),e.add(this.graphNode),this._pos=null}get position(){return this._pos||this.updatePosition(),this._pos}updatePosition(){const e=this.graphNode.getWorldPosition(new r["x"]).project(this.camera);this._pos=this._pos||{},this._pos.x=(e.x+1)/2,this._pos.y=(1-e.y)/2}}const m=4e-4;var w={name:"mesh-viewer",directives:{resize:o.a},mixins:[c["a"],l["a"]],props:{light:{default:"white"},entities:Array,showStatus:{default:!1},cameraInit:{type:Object,default:()=>({radius:6,theta:0,phi:0})}},data(){return{size:{width:800,height:800},fps:0,labels:[]}},created(){0},mounted(){this.initializeRenderer(),this.createScene(),this.render()},beforeDestroy(){this.rendererActive=!1},methods:{onResize(){this.size={width:this.$el.clientWidth,height:this.$el.clientHeight}},initializeRenderer(){this.renderer=new r["y"]({antialias:!0,canvas:this.$refs.canvas,alpha:!0}),this.renderer.setClearColor(new r["c"]("lightblue"),1),this.renderer.setSize(this.size.width,this.size.height,!1),this.camera=new r["p"](60,this.size.width/this.size.height,.1,100),this.viewTheta=this.cameraInit.theta+.5*Math.PI,this.viewPhi=this.cameraInit.phi+.5*Math.PI,this.viewRadius=this.cameraInit.radius,this.scene=new r["s"];const e=new r["f"](this.light,1);e.position.set(-30,100,60),e.target=this.scene,this.scene.add(e);const t=new r["f"]("lightblue",.4);t.position.set(0,1e3,0),t.target=this.scene,this.scene.add(t),this.scene.add(new r["a"]("#323f43")),this.rendererActive=!0},async render(){let e=performance.now(),t=Math.floor(e/1e3),s=0,i=0;while(this.rendererActive){this.sensorVelocity&&(this.viewTheta+=this.sensorVelocity[1]*m,this.viewPhi+=this.sensorVelocity[0]*m,this.viewTheta=Math.max(Math.min(this.viewTheta,Math.PI-.01),.01)),this.camera.position.copy(p(this.viewRadius,this.viewTheta,this.viewPhi)),this.camera.lookAt(0,0,0),this.renderer.render(this.scene,this.camera),this.updateLabels(),++s;const n=performance.now();i=Math.max(i,n-e);const a=Math.floor(n/1e3);a>t&&(this.fps=s/(a-t),s=0,i=0,t=a),e=n,await Object(h["a"])()}},async createScene(){if(this.entities)for(const e of this.entities){const t=new r["n"];this.scene.add(t);const{default:i}=await s("3e72")(`./${e.prototype}.json`),n=await new Promise(e=>(new r["o"]).parse(i,e));if(t.add(n),e.position&&t.position.set(...e.position),e.quaternion?n.quaternion.set(...e.quaternion):e.euler&&n.quaternion.setFromEuler(new r["g"](...e.euler,"XZY")),e.label){const s=new d(t,this.camera,"object"===typeof e.label?e.label:{content:e.label});this.labels.push(s)}}},updateLabels(){for(const e of this.labels)e.updatePosition();this.labels.length&&this.$forceUpdate()},onMouseMove(e){1===e.buttons&&(this.viewPhi+=.01*e.movementX,this.viewTheta-=.01*e.movementY,this.viewTheta=Math.max(Math.min(this.viewTheta,Math.PI-.01),.01))},onTouchMove(e){const t=e.touches[0];if(this.lastTouchPoint){const e=t.pageX-this.lastTouchPoint.pageX,s=t.pageY-this.lastTouchPoint.pageY;this.viewPhi+=.01*e,this.viewTheta-=.01*s,this.viewTheta=Math.max(Math.min(this.viewTheta,Math.PI-.01),.01)}this.lastTouchPoint={pageX:t.pageX,pageY:t.pageY}},onTouchEnd(){this.lastTouchPoint=null},onMouseWheel(e){this.viewRadius*=Math.exp(.001*e.deltaY)},permute(e){this.elements.forEach((t,s)=>{const i=u["k"][elementsSchema[s].index][e];t.position.copy(this.elementPositions[i])}),this.elementPositions=this.elements.reduce((e,t,s)=>(e[elementsSchema[s].index]=t.position.clone(),e),[]),this.rotationIndex=0,this.rotationT=0}},watch:{size(e){this.camera.aspect=e.width/e.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(e.width,e.height,!1)}}},f=w,v=(s("cd67"),s("0c7c")),b=Object(v["a"])(f,i,n,!1,null,"65a99db7",null);t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-358a8410.3b57ed98.js.map